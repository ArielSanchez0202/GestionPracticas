{% extends 'base_coordinador.html' %}
{% load static %}
{% block content %}
<!-- Vincula el archivo CSS -->
<link rel="stylesheet" href="{% static 'css/documents.css' %}">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

<div class="container">
    <!-- Título principal -->
    <h1 class="page-title">Documentos</h1>

    {% for doc in documentos %}
        <div class="documento-card">
            <h3>
                <!-- Ícono directamente en el HTML con color blanco -->
                <i class="fas fa-file-alt" style="color: #ffffff; transition: color 0.3s;"></i>
                {{ doc.descripcion }}
            </h3>
            
            {% if doc.documento and doc.documento.archivo %}
                <div class="btn-group">
                    <!-- Botón para ver el documento -->
                    <a href="{% url 'ver_documento' document_id=doc.documento.id %}" class="btn btn-primary-outline" target="_blank" 
                        style="transition: background-color 0.3s, transform 0.2s;">
                        <i class="fas fa-eye" style="color: #ffffff; transition: color 0.3s;"></i> Ver
                    </a>
                    
                    <!-- Botón para descargar el documento -->
                    <a href="{{ doc.documento.archivo.url }}" class="btn btn-secondary-outline" download 
                        style="transition: background-color 0.3s, transform 0.2s;">
                        <i class="fas fa-download" style="color: #ffffff; transition: color 0.3s;"></i> Descargar
                    </a>
                    
                    <!-- Botón para actualizar el documento -->
                    <button onclick="toggleFileInput('{{ doc.tipo }}')" class="btn btn-warning-outline" 
                        style="transition: background-color 0.3s, transform 0.2s;">
                        <i class="fas fa-edit" style="color: #ffffff; transition: color 0.3s;"></i> Actualizar
                    </button>
                </div>
            {% else %}
                <!-- Texto con color blanco directamente en HTML -->
                <p class="text-muted" style="color: #ffffff;">Documento no disponible.</p>
                <!-- Botón para subir un documento -->
                <button onclick="toggleFileInput('{{ doc.tipo }}')" class="btn btn-success-outline">
                    <i class="fas fa-upload"></i> Subir documento
                </button>                
            {% endif %}
            
            <!-- Formulario para subir/actualizar un documento -->
            <form id="form-update-{{ doc.tipo }}" method="post" enctype="multipart/form-data" style="display: none;" class="mt-3">
                {% csrf_token %}
                <input type="hidden" name="tipo" value="{{ doc.tipo }}">
                <input type="file" name="archivo" class="form-control" required>
                <button type="submit" class="btn btn-primary-outline mt-2">Guardar</button>
            </form>
        </div>
    {% endfor %}

    <!-- Módulo para configurar las fechas -->
    <hr class="my-5">
    <h2>Configurar Fechas del Semestre</h2>
    <p>Establece las fechas límite de inicio y término para las prácticas.</p>
    
    <!-- Formulario para mostrar las fechas en modo solo lectura -->
    <div class="form-group">
        <label for="fecha_inicio_limite">Fecha de Inicio:</label>
        <p>{{ practica_config.fecha_inicio_limite}}</p>
    </div>
    <div class="form-group">
        <label for="fecha_termino_limite">Fecha de Término:</label>
        <input type="date" id="fecha_termino_limite" name="fecha_termino_limite" class="form-control" 
               value="{{ practica_config.fecha_termino_limite|date:'Y-m-d' }}" readonly>
    </div>
    <hr class="my-5">
    <div class="text-center">
        <a href="{% url 'configurar_fechas' %}" class="btn btn-primary">
            <i class="fas fa-calendar-alt"></i> Configurar Fechas de Prácticas
        </a>
    </div>    

<script>
    function toggleFileInput(docTipo) {
        var form = document.getElementById('form-update-' + docTipo);
        // Alterna la visibilidad del formulario (mostrar o esconder)
        if (form.style.display === 'none') {
            form.style.display = 'block';
        } else {
            form.style.display = 'none';
        }
    }
</script>
{% endblock %}

{% extends 'base_coordinador.html' %}
{% load static %}
{% block content %}
<!-- Vincula el archivo CSS -->
<link rel="stylesheet" href="{% static 'css/documents.css' %}">

<div class="container">
    <!-- Título principal -->
    <h1 class="page-title">Documentos</h1>

    {% for doc in documentos %}
        <div class="documento-card">
            <h3>
                <i class="fas fa-file-alt"></i> <!-- Ícono -->
                {{ doc.descripcion }}
            </h3>
            
            {% if doc.documento and doc.documento.archivo %}
                <div class="btn-group">
                    <!-- Botón para ver el documento -->
                    <a href="{% url 'ver_documento' document_id=doc.documento.id %}" class="btn btn-info" target="_blank">Ver</a>
                    
                    <!-- Botón para descargar el documento -->
                    <a href="{{ doc.documento.archivo.url }}" class="btn btn-success" download>Descargar</a>
                    
                    <!-- Botón para actualizar el documento -->
                    <button onclick="toggleFileInput('{{ doc.tipo }}')" class="btn btn-warning">Actualizar</button>
                </div>
            {% else %}
                <p class="text-muted">Documento no disponible.</p>
                <!-- Botón para subir un documento -->
                <button onclick="toggleFileInput('{{ doc.tipo }}')" class="btn btn-primary">Subir documento</button>
            {% endif %}
            
            <!-- Formulario para subir/actualizar un documento -->
            <form id="form-update-{{ doc.tipo }}" method="post" enctype="multipart/form-data" style="display: none;" class="mt-3">
                {% csrf_token %}
                <input type="hidden" name="tipo" value="{{ doc.tipo }}">
                <input type="file" name="archivo" class="form-control" required>
                <button type="submit" class="btn btn-primary mt-2">Guardar</button>
            </form>
        </div>
    {% endfor %}
</div>

<script>
    function toggleFileInput(docTipo) {
        var form = document.getElementById('form-update-' + docTipo);
        // Alterna la visibilidad del formulario (mostrar o esconder)
        if (form.style.display === 'none') {
            form.style.display = 'block';
        } else {
            form.style.display = 'none';
        }
    }
</script>
{% endblock %}

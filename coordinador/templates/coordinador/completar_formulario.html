<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe Confidencial de Práctica Profesional</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/confidencial.css' %}">
</head>
<body class="bg-light">

    <div class="container mt-5">
        <!-- Título principal -->
        <h1 class="text-center mb-4">Informe Confidencial de Práctica Profesional</h1>
        <p class="text-muted text-center">
            Por favor, complete este formulario para evaluar al estudiante.
        </p>

        <!-- Información del estudiante y práctica -->
        <div class="bg-custom p-4 rounded shadow mb-4">
            <h3 class="mb-3">Información del Estudiante</h3>
            <div class="row">
                <div class="col-md-6">
                    <p><strong>Nombre del Estudiante:</strong> {{ ficha.estudiante.usuario.first_name }} {{ ficha.estudiante.usuario.last_name }}</p>
                    <p><strong>Carrera:</strong> {{ ficha.estudiante.carrera }}</p>
                    <p><strong>RUT:</strong> {{ ficha.estudiante.rut }}</p>
                    <p><strong>Teléfono:</strong> {{ ficha.estudiante.numero_telefono }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong>Cargo del Estudiante:</strong> {{ ficha.cargo_desarrollar }}</p>
                    <p><strong>Tareas Realizadas:</strong> {{ ficha.actividades_realizar }}</p>
                </div>
            </div>
            
            <h3 class="mb-3">Información de la Práctica</h3>
            <div class="row">
                <div class="col-md-6">
                    <p><strong>Empresa:</strong> {{ ficha.razon_social }}</p>
                    <p><strong>Dirección de la Empresa:</strong> {{ ficha.direccion_empresa }}</p>
                    <p><strong>Supervisor del estudiante:</strong> {{ ficha.jefe_directo }} ({{ ficha.cargo }})</p>
                </div>
                <div class="col-md-6">
                    <p><strong>Teléfono del Supervisor:</strong> {{ ficha.telefono_jefe }}</p>
                    <p><strong>Correo del Supervisor:</strong> {{ ficha.correo_jefe }}</p>
                    <p><strong>Fecha Inicio:</strong> {{ ficha.fecha_inicio }}</p>
                    <p><strong>Fecha Término:</strong> {{ ficha.fecha_termino }}</p>
                </div>
            </div>
        </div>

        <!-- Formulario de evaluación -->
        <form method="post" class="bg-custom p-4 rounded shadow">
            {% csrf_token %}

            <!-- Campo oculto para ficha_inscripcion -->
            {{ form.ficha_inscripcion }}  <!-- Este campo es gestionado por Django como oculto -->
            
            <!-- Sección: Aspectos Técnicos -->
            <h3 class="mb-3">A. Aspectos Técnicos</h3>
            <div class="mb-3">
                <label for="calidad_trabajo" class="form-label">Calidad del Trabajo</label>
                {{ form.calidad_trabajo }}
            </div>
            <div class="mb-3">
                <label for="calidad_observacion" class="form-label">Observaciones sobre la Calidad</label>
                {{ form.calidad_observacion }}
            </div>

            <div class="mb-3">
                <label for="efectividad_trabajo" class="form-label">Efectividad en el Trabajo</label>
                {{ form.efectividad_trabajo }}
            </div>
            <div class="mb-3">
                <label for="efectividad_observacion" class="form-label">Observaciones sobre la Efectividad</label>
                {{ form.efectividad_observacion }}
            </div>

            <div class="mb-3">
                <label for="conocimientos_profesionales" class="form-label">Conocimientos Profesionales</label>
                {{ form.conocimientos_profesionales }}
            </div>
            <div class="mb-3">
                <label for="conocimientos_observacion" class="form-label">Observaciones sobre los Conocimientos</label>
                {{ form.conocimientos_observacion }}
            </div>

            <div class="mb-3">
                <label for="adaptabilidad_cambios" class="form-label">Adaptabilidad a los Cambios</label>
                {{ form.adaptabilidad_cambios }}
            </div>
            <div class="mb-3">
                <label for="adaptabilidad_observacion" class="form-label">Observaciones sobre la Adaptabilidad</label>
                {{ form.adaptabilidad_observacion }}
            </div>

            <div class="mb-3">
                <label for="organizacion_trabajo" class="form-label">Organización del Trabajo</label>
                {{ form.organizacion_trabajo }}
            </div>
            <div class="mb-3">
                <label for="organizacion_observacion" class="form-label">Observaciones sobre la Organización</label>
                {{ form.organizacion_observacion }}
            </div>

            <!-- Sección: Aspectos Personales -->
            <h3 class="mt-4 mb-3">B. Aspectos Personales</h3>
            <div class="mb-3">
                <label for="interes_trabajo" class="form-label">Interés en el Trabajo</label>
                {{ form.interes_trabajo }}
            </div>
            <div class="mb-3">
                <label for="interes_observacion" class="form-label">Observaciones sobre el Interés</label>
                {{ form.interes_observacion }}
            </div>

            <div class="mb-3">
                <label for="responsabilidad" class="form-label">Responsabilidad</label>
                {{ form.responsabilidad }}
            </div>
            <div class="mb-3">
                <label for="responsabilidad_observacion" class="form-label">Observaciones sobre la Responsabilidad</label>
                {{ form.responsabilidad_observacion }}
            </div>

            <div class="mb-3">
                <label for="cooperacion_trabajo" class="form-label">Cooperación en el Trabajo</label>
                {{ form.cooperacion_trabajo }}
            </div>
            <div class="mb-3">
                <label for="cooperacion_observacion" class="form-label">Observaciones sobre la Cooperación</label>
                {{ form.cooperacion_observacion }}
            </div>

            <div class="mb-3">
                <label for="creatividad" class="form-label">Creatividad</label>
                {{ form.creatividad }}
            </div>
            <div class="mb-3">
                <label for="creatividad_observacion" class="form-label">Observaciones sobre la Creatividad</label>
                {{ form.creatividad_observacion }}
            </div>

            <div class="mb-3">
                <label for="iniciativa" class="form-label">Iniciativa</label>
                {{ form.iniciativa }}
            </div>
            <div class="mb-3">
                <label for="iniciativa_observacion" class="form-label">Observaciones sobre la Iniciativa</label>
                {{ form.iniciativa_observacion }}
            </div>

            <div class="mb-3">
                <label for="integracion_grupo" class="form-label">Integración al Grupo</label>
                {{ form.integracion_grupo }}
            </div>
            <div class="mb-3">
                <label for="integracion_observacion" class="form-label">Observaciones sobre la Integración</label>
                {{ form.integracion_observacion }}
            </div>

            <!-- Sección: Preguntas Adicionales -->
            <h3 class="mt-4 mb-3">C. Preguntas Adicionales</h3>

            <!-- Pregunta: ¿Considera positivo recibir alumnos en práctica? -->
            <div class="mb-3">
                <p><strong>¿Considera positivo recibir alumnos en práctica de la Universidad Autónoma de Chile?</strong></p>
                <div class="form-check">
                    <!-- Radio Button: Sí -->
                    <input type="radio" class="form-check-input" id="positivo_recibir_si" name="positivo_recibir" value="True" {% if form.positivo_recibir.value == 'True' %}checked{% endif %}>
                    <label class="form-check-label" for="positivo_recibir_si">Sí</label>
                </div>
                <div class="form-check">
                    <!-- Radio Button: No -->
                    <input type="radio" class="form-check-input" id="positivo_recibir_no" name="positivo_recibir" value="False" {% if form.positivo_recibir.value == 'False' %}checked{% endif %}>
                    <label class="form-check-label" for="positivo_recibir_no">No</label>
                </div>
            </div>

            <!-- Pregunta: ¿Qué tipo de especialidad requiere su empresa de los alumnos en práctica? -->
            <div class="mb-3">
                <label for="tipo_especialidad" class="form-label"><strong>¿Qué tipo de especialidad requiere su empresa de los alumnos en práctica?</strong></label>
                {{ form.tipo_especialidad }}
            </div>

            <!-- Botón de Envío -->
            <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary">Guardar Evaluación</button>
            </div>
        </form>
    <!-- Modal de Confirmación -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="successModalLabel">Formulario Guardado</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    El formulario se ha guardado correctamente. Puedes cerrar esta ventana ahora.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="window.close();">Cerrar Página</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Script para abrir el modal solo si hay mensaje de éxito -->
    <script>
        {% if messages %}
            // Mostrar el modal solo si hay un mensaje de éxito
            $('#successModal').modal('show');
        {% endif %}
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

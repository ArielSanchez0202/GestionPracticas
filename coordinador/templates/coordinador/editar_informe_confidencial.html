{% extends 'base_coordinador.html' %}

{% block title %}Editar Informe Confidencial{% endblock %}
{%load static%}
{% block content %}
    <div class="container mt-5">
        <!-- Botón de Volver -->
        <a href="javascript:history.back()">
            <img src="{% static 'icons/arrow_back.svg' %}" alt="Volver" style="width: 30px; height: 30px;">
        </a>
        <h1 class="text-center mb-4">Editar Informe Confidencial</h1>

        <form method="post">
            {% csrf_token %}

            <!-- Mostrar todos los campos en modo solo lectura -->
            <div class="mb-3">
                <label for="calidad_trabajo" class="form-label">Calidad del Trabajo</label>
                <input type="text" class="form-control" value="{% if informe.calidad_trabajo == 'S' %}Siempre{% elif informe.calidad_trabajo == 'F' %}Frecuentemente{% elif informe.calidad_trabajo == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="calidad_observacion" class="form-label">Observaciones sobre la Calidad</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.calidad_observacion }}</textarea>
            </div>

            <div class="mb-3">
                <label for="efectividad_trabajo" class="form-label">Efectividad en el Trabajo</label>
                <input type="text" class="form-control" value="{% if informe.efectividad_trabajo == 'S' %}Siempre{% elif informe.efectividad_trabajo == 'F' %}Frecuentemente{% elif informe.efectividad_trabajo == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="efectividad_observacion" class="form-label">Observaciones sobre la Efectividad</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.efectividad_observacion }}</textarea>
            </div>

            <div class="mb-3">
                <label for="conocimientos_profesionales" class="form-label">Conocimientos Profesionales</label>
                <input type="text" class="form-control" value="{% if informe.conocimientos_profesionales == 'S' %}Siempre{% elif informe.conocimientos_profesionales == 'F' %}Frecuentemente{% elif informe.conocimientos_profesionales == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="conocimientos_observacion" class="form-label">Observaciones sobre los Conocimientos Profesionales</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.conocimientos_observacion }}</textarea>
            </div>

            <div class="mb-3">
                <label for="adaptabilidad_cambios" class="form-label">Adaptabilidad a Cambios</label>
                <input type="text" class="form-control" value="{% if informe.adaptabilidad_cambios == 'S' %}Siempre{% elif informe.adaptabilidad_cambios == 'F' %}Frecuentemente{% elif informe.adaptabilidad_cambios == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="adaptabilidad_observacion" class="form-label">Observaciones sobre la Adaptabilidad</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.adaptabilidad_observacion }}</textarea>
            </div>

            <div class="mb-3">
                <label for="organizacion_trabajo" class="form-label">Organización del Trabajo</label>
                <input type="text" class="form-control" value="{% if informe.organizacion_trabajo == 'S' %}Siempre{% elif informe.organizacion_trabajo == 'F' %}Frecuentemente{% elif informe.organizacion_trabajo == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="organizacion_observacion" class="form-label">Observaciones sobre la Organización del Trabajo</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.organizacion_observacion }}</textarea>
            </div>

            <!-- Campos adicionales -->
            <div class="mb-3">
                <label for="interes_trabajo" class="form-label">Interés en el Trabajo</label>
                <input type="text" class="form-control" value="{% if informe.interes_trabajo == 'S' %}Siempre{% elif informe.interes_trabajo == 'F' %}Frecuentemente{% elif informe.interes_trabajo == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="interes_observacion" class="form-label">Observaciones sobre el Interés</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.interes_observacion }}</textarea>
            </div>

            <div class="mb-3">
                <label for="responsabilidad" class="form-label">Responsabilidad</label>
                <input type="text" class="form-control" value="{% if informe.responsabilidad == 'S' %}Siempre{% elif informe.responsabilidad == 'F' %}Frecuentemente{% elif informe.responsabilidad == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="responsabilidad_observacion" class="form-label">Observaciones sobre la Responsabilidad</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.responsabilidad_observacion }}</textarea>
            </div>

            <div class="mb-3">
                <label for="cooperacion_trabajo" class="form-label">Cooperación en el Trabajo</label>
                <input type="text" class="form-control" value="{% if informe.cooperacion_trabajo == 'S' %}Siempre{% elif informe.cooperacion_trabajo == 'F' %}Frecuentemente{% elif informe.cooperacion_trabajo == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="cooperacion_observacion" class="form-label">Observaciones sobre la Cooperación</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.cooperacion_observacion }}</textarea>
            </div>

            <div class="mb-3">
                <label for="creatividad" class="form-label">Creatividad</label>
                <input type="text" class="form-control" value="{% if informe.creatividad == 'S' %}Siempre{% elif informe.creatividad == 'F' %}Frecuentemente{% elif informe.creatividad == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="creatividad_observacion" class="form-label">Observaciones sobre la Creatividad</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.creatividad_observacion }}</textarea>
            </div>

            <div class="mb-3">
                <label for="iniciativa" class="form-label">Iniciativa</label>
                <input type="text" class="form-control" value="{% if informe.iniciativa == 'S' %}Siempre{% elif informe.iniciativa == 'F' %}Frecuentemente{% elif informe.iniciativa == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="iniciativa_observacion" class="form-label">Observaciones sobre la Iniciativa</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.iniciativa_observacion }}</textarea>
            </div>

            <div class="mb-3">
                <label for="integracion_grupo" class="form-label">Integración al Grupo</label>
                <input type="text" class="form-control" value="{% if informe.integracion_grupo == 'S' %}Siempre{% elif informe.integracion_grupo == 'F' %}Frecuentemente{% elif informe.integracion_grupo == 'A' %}A veces{% else %}Nunca{% endif %}" disabled>
            </div>

            <div class="mb-3">
                <label for="integracion_observacion" class="form-label">Observaciones sobre la Integración al Grupo</label>
                <textarea class="form-control" rows="3" disabled>{{ informe.integracion_observacion }}</textarea>
            </div>

            <div class="mb-3">
                <label for="tipo_especialidad" class="form-label">¿Qué tipo de especialidad o área sugiere que se pueda incluir?</label>
                <input type="text" class="form-control" value="{{ informe.tipo_especialidad }}" disabled>
            </div>

            <!-- Nota calculada -->
            <div class="mb-3">
                <label for="nota_calculada" class="form-label">Nota Calculada</label>
                <input type="text" class="form-control" value="{{ informe.nota }}" disabled>
            </div>

            <!-- Botón para editar la nota -->
            <div class="mb-3">
                <button type="button" id="editar_nota_btn" class="btn btn-warning">Editar Nota</button>
            </div>

            <!-- Formulario para actualizar la nota -->
            <div id="nota_editable" style="display:none;">
                <div class="mb-3">
                    <label for="nota_manual" class="form-label">Nueva Nota:</label>
                    <input type="number" name="nota_manual" id="nota_manual" class="form-control" 
                           value="{{ informe.nota }}" min="1" max="7" step="0.1" required>
                    <small class="form-text text-muted">Nota entre 1 y 7 </small>
                </div>
                <button type="submit" class="btn btn-primary">Actualizar Nota</button>
            </div>

            <!-- Botón "Confirmar Nota" que se muestra cuando no se está editando -->
            <div id="confirmar_nota_div" style="display:block;">
                <button type="submit" class="btn btn-success">Confirmar Nota</button>
            </div>
        </form>
    </div>

    <script>
        // Mostrar el campo para editar la nota
        document.getElementById('editar_nota_btn').addEventListener('click', function() {
            document.getElementById('nota_editable').style.display = 'block';
            document.getElementById('confirmar_nota_div').style.display = 'none';
            document.getElementById('editar_nota_btn').style.display = 'none';
        });
    </script>
{% endblock %}
